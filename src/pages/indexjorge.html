<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Guardias - IES Ejemplo</title>
    <style>
        @media (max-width: 380px) {
    .contenedor-instituto {
        margin: 5px;
        padding: 15px;
        border-radius: 6px;
    }

    .cabecera-instituto {
        padding: 1.5rem 1rem;
    }

    .hora-clase {
        font-size: 0.75rem;
        padding: 0.6rem;
        min-width: 80px;
    }

    .dia-semana {
        font-size: 0.75rem;
        padding: 0.8rem;
    }

    .horario-clases {
        grid-template-columns: 80px repeat(5, 1fr);
        margin: 1rem 0;
    }

    .celda-guardia {
        min-height: 60px;
        padding: 0.6rem;
    }

    .etiqueta-guardia {
        font-size: 0.65rem;
    }

    .info-guardia {
        font-size: 0.75rem;
        margin-top: 0.3rem;
    }

    .recreo {
        font-size: 0.8rem;
        padding: 0.8rem;
    }

    .filtro-container {
        margin: 1.5rem 0;
        justify-content: center;
    }

    .boton-filtro {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
    }

    .seccion-guardias {
        margin: 1.5rem 0;
        padding: 1rem;
    }

    .titulo-seccion {
        font-size: 1.1rem;
        margin-bottom: 1rem;
    }

    .tarjeta-guardia {
        padding: 1rem;
        flex-direction: column;
        gap: 0.8rem;
    }

    .boton-asignar {
        width: 100%;
        font-size: 0.85rem;
        padding: 0.5rem;
        justify-content: center;
    }

    .menu-inferior {
        gap: 0.5rem;
        padding: 0.8rem;
    }

    .boton-menu {
        padding: 0.5rem 0.8rem;
        font-size: 0.8rem;
    }

    .info-usuario {
        font-size: 0.85rem;
        margin-bottom: 0.5rem;
    }

    .fecha {
        font-size: 0.8rem;
    }
}


        :root {
            --color-institucional: #2C3E50;
            --color-secundario: #E67E22;
            --color-destacado: #2980B9;
            --fondo: #F8F9FA;
            --borde: #DEE2E6;
            --sombra: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', system-ui, sans-serif;
        }

        body {
            background: var(--fondo);
            color: var(--color-institucional);
            line-height: 1.6;
            padding-bottom: 80px;
        }

        .contenedor-instituto {
            max-width: 1200px;
            margin: 30px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--sombra);
            overflow-x: hidden;
        }

        .cabecera-instituto {
            text-align: center;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            background: var(--color-institucional);
            color: white;
            border-radius: 8px;
        }

        .info-usuario {
            position: absolute;
            top: 1.5rem;
            left: 2rem;
            text-align: left;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem 1.2rem;
            border-radius: 6px;
        }

        .fecha {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
        }

        .horario-clases {
            display: grid;
            grid-template-columns: 140px repeat(5, 1fr);
            gap: 1px;
            margin: 2rem 0;
            min-width: 600px;
            overflow-x: auto;
            background: var(--borde);
            border-radius: 8px;
            box-shadow: var(--sombra);
        }

        .hora-clase {
            background: var(--color-institucional);
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 0.9rem;
            position: sticky;
            left: 0;
            z-index: 1000;
            min-width: 140px;
            font-weight: 500;
        }

        .dia-semana {
            background: var(--color-destacado);
            color: white;
            padding: 1rem;
            text-align: center;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 500;
        }

        .celda-guardia {
            background: white;
            min-height: 80px;
            padding: 1rem;
            position: relative;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .celda-guardia.disponible {
            background: #F0F4F8;
            cursor: pointer;
            border-left: 4px solid var(--color-secundario);
        }

        .celda-guardia.disponible:hover {
            transform: translateY(-2px);
            box-shadow: var(--sombra);
            z-index: 1;
        }

        .celda-guardia.asignada {
            background: #E8F5E9;
            border-left: 4px solid #2ECC71;
        }

        .etiqueta-guardia {
            font-size: 0.75rem;
            color: var(--color-secundario);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-guardia {
            font-size: 0.9rem;
            color: var(--color-institucional);
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .recreo {
            background: #FFF3E0 !important;
            color: #EF6C00;
            font-style: italic;
            grid-column: 2 / span 5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .seccion-guardias {
            margin: 2rem 0;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: var(--sombra);
        }

        .titulo-seccion {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--color-institucional);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--borde);
        }

        .titulo-seccion::before {
            content: '';
            display: block;
            width: 8px;
            height: 24px;
            background: var(--color-secundario);
            border-radius: 4px;
        }

        .lista-guardias {
            display: grid;
            gap: 1rem;
        }

        .tarjeta-guardia {
            padding: 1.25rem;
            border: 1px solid var(--borde);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            background: white;
        }

        .tarjeta-guardia:hover {
            transform: translateX(4px);
            border-color: var(--color-secundario);
        }

        .boton-asignar {
            background: var(--color-secundario);
            color: white;
            border: none;
            padding: 0.5rem 1.25rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .boton-asignar:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .boton-asignar.asignada {
            background: #95A5A6;
            cursor: default;
        }

        .filtro-container {
            margin: 2rem 0;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .boton-filtro {
            background: var(--color-destacado);
            color: white;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .boton-filtro:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .menu-inferior {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--color-institucional);
            display: flex;
            justify-content: center;
            padding: 1rem;
            gap: 2rem;
            z-index: 2000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .boton-menu {
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
        }

        .boton-menu.activo {
            background: rgba(255, 255, 255, 0.15);
        }

        .boton-menu:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .contenedor-instituto {
                margin: 10px;
                padding: 20px;
                border-radius: 8px;
            }

            .info-usuario {
                position: static;
                text-align: center;
                margin-bottom: 1rem;
                background: none;
                padding: 0;
            }

            .horario-clases {
                min-width: 100%;
                grid-template-columns: 100px repeat(5, 1fr);
            }

            .hora-clase {
                font-size: 0.8rem;
                padding: 0.8rem;
                min-width: 100px;
            }

            .tarjeta-guardia {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .boton-asignar {
                width: 100%;
                justify-content: center;
            }

            .menu-inferior {
                gap: 0.5rem;
                padding: 0.8rem;
            }

            .boton-menu {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }

        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .seccion-guardias {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body>
    <div class="contenedor-instituto">
        <header class="cabecera-instituto">
            <h1 class="titulo-principal">Gesti√≥n de Guardias</h1>
            <div class="info-usuario">
                <div>Hola, Pedro</div>
                <div class="fecha" id="fecha"></div>
            </div>
        </header>

        <div class="horario-clases">
            <div class="hora-clase"></div>
            <div class="dia-semana">Lunes</div>
            <div class="dia-semana">Martes</div>
            <div class="dia-semana">Mi√©rcoles</div>
            <div class="dia-semana">Jueves</div>
            <div class="dia-semana">Viernes</div>

            <!-- Primera hora -->
            <div class="hora-clase">15:30-16:25</div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 203</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Laboratorio 1</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>

            <!-- Segunda hora -->
            <div class="hora-clase">16:25-17:20</div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 105</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 301</div>
            </div>

            <!-- Tercera hora -->
            <div class="hora-clase">17:20-18:15</div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 110</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Taller 3</div>
            </div>
            <div class="celda-guardia"></div>

            <!-- Recreo -->
            <div class="hora-clase">18:15-18:35</div>
            <div class="recreo">RECREO</div>

            <!-- Cuarta hora -->
            <div class="hora-clase">18:35-19:30</div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 215</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Laboratorio 2</div>
            </div>

            <!-- Quinta hora -->
            <div class="hora-clase">19:30-20:25</div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 305</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Sala Profesores</div>
            </div>
            <div class="celda-guardia"></div>

            <!-- Sexta hora -->
            <div class="hora-clase">20:25-21:20</div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Aula 201</div>
            </div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia"></div>
            <div class="celda-guardia disponible">
                <div class="etiqueta-guardia">Guardia disponible</div>
                <div class="info-guardia">Biblioteca</div>
            </div>
            <div class="celda-guardia"></div>
        </div>

        <div class="filtro-container">
            <button class="boton-filtro">Filtrar por mismo profesor</button>
        </div>

        <div class="seccion-guardias">
            <h2 class="titulo-seccion">üïí Guardias Disponibles</h2>
            <div class="lista-guardias"></div>
        </div>

        <div class="seccion-guardias">
            <h2 class="titulo-seccion">‚úÖ Guardias Asignadas</h2>
            <div class="lista-guardias-asignadas"></div>
        </div>

        <!-- Contenedor para la lista de guardias disponibles -->
        <div class="lista-guardias-disponibles" style="display: none; position: absolute; background: white; border: 1px solid var(--borde); border-radius: 5px; z-index: 1000;"></div>
    </div>

    <nav class="menu-inferior">
        <div class="boton-menu activo">üìÖ Horario</div>
        <div class="boton-menu">üìã Disponibles</div>
        <div class="boton-menu">‚öôÔ∏è Ajustes</div>
    </nav>

    <script>

        // Funci√≥n para obtener la fecha de hoy en formato "13 de Marzo"
        function obtenerFechaActual() {
            const fecha = new Date();
            const dias = ["Domingo", "Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado"];
            const meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            
            const dia = fecha.getDate();
            const mes = meses[fecha.getMonth()];

            return `${dia} de ${mes}`;
        }

        // Actualizar la fecha en el div
        document.getElementById("fecha").innerText = obtenerFechaActual();

        // Funci√≥n para obtener la hora correspondiente a una celda
        function obtenerHora(celda) {
            let elementoAnterior = celda.previousElementSibling;
            while(elementoAnterior && !elementoAnterior.classList.contains('hora-clase')) {
                elementoAnterior = elementoAnterior.previousElementSibling;
            }
            return elementoAnterior ? elementoAnterior.textContent : 'Hora no disponible';
        }

        // Actualizar todas las listas de guardias
        function actualizarListas() {
            const disponibles = document.querySelector('.lista-guardias');
            const asignadas = document.querySelector('.lista-guardias-asignadas');
            
            if (!disponibles || !asignadas) {
                console.error('Elementos no encontrados en el DOM');
                return;
            }

            disponibles.innerHTML = '';
            asignadas.innerHTML = '';

            document.querySelectorAll('.celda-guardia').forEach(celda => {
                const infoGuardia = celda.querySelector('.info-guardia');
                if (!infoGuardia) return;

                const hora = obtenerHora(celda);
                const aula = infoGuardia.textContent;
                const esDisponible = celda.classList.contains('disponible');

                const tarjeta = document.createElement('div');
                tarjeta.className = 'tarjeta-guardia';
                tarjeta.innerHTML = `
                    <div class="info-guardia">
                        <p><strong>${hora}</strong></p>
                        <p>${aula}</p>
                    </div>
                    <button class="boton-asignar ${esDisponible ? '' : 'asignada'}" 
                            ${esDisponible ? '' : 'disabled'}>
                        ${esDisponible ? 'Asignar' : 'Asignada'}
                    </button>
                `;

                const contenedor = esDisponible ? disponibles : asignadas;
                if (esDisponible) {
                    tarjeta.querySelector('button').addEventListener('click', () => asignarGuardia(celda));
                }
                contenedor.appendChild(tarjeta);
            });
        }

        // Funci√≥n para asignar una guardia
        function asignarGuardia(celda) {
            const infoGuardia = celda.querySelector('.info-guardia');
            if (!infoGuardia) return;

            const aula = infoGuardia.textContent;
            const hora = obtenerHora(celda);
            
            if (confirm(`¬øAsignar guardia en ${aula}?`)) {
                celda.classList.remove('disponible');
                celda.classList.add('asignada');
                const etiqueta = celda.querySelector('.etiqueta-guardia');
                if (etiqueta) etiqueta.textContent = 'Asignada';
                actualizarListas();
            }
        }

        // Mostrar lista de guardias disponibles
        function mostrarListaGuardias(celda) {
            const listaGuardias = document.querySelector('.lista-guardias-disponibles');
            if (!listaGuardias) return;

            listaGuardias.innerHTML = '';
            const infoGuardia = celda.querySelector('.info-guardia');
            if (!infoGuardia) return;

            const hora = obtenerHora(celda);
            const aula = infoGuardia.textContent;

            const tarjeta = document.createElement('div');
            tarjeta.className = 'tarjeta-guardia';
            tarjeta.innerHTML = `
                <div class="info-guardia">
                    <p><strong>${hora}</strong></p>
                    <p>${aula}</p>
                </div>
                <button class="boton-asignar">Asignar</button>
            `;
            
            tarjeta.querySelector('button').addEventListener('click', () => {
                asignarGuardia(celda);
                listaGuardias.style.display = 'none';
            });
            
            listaGuardias.appendChild(tarjeta);
            listaGuardias.style.display = 'block';
            
            // Posicionamiento correcto considerando scroll
            const rect = celda.getBoundingClientRect();
            listaGuardias.style.top = `${rect.bottom + window.scrollY}px`;
            listaGuardias.style.left = `${rect.left + window.scrollX}px`;
        }

        // Event listeners
        document.querySelector('.horario-clases').addEventListener('click', (e) => {
            const celda = e.target.closest('.celda-guardia.disponible');
            if (celda) mostrarListaGuardias(celda);
        });

        document.querySelector('.boton-filtro').addEventListener('click', actualizarListas);
        
        // Cerrar lista al hacer click fuera
        document.addEventListener('click', (e) => {
            const lista = document.querySelector('.lista-guardias-disponibles');
            if (lista && !lista.contains(e.target) && !e.target.closest('.celda-guardia.disponible')) {
                lista.style.display = 'none';
            }
        });

        // Inicializaci√≥n
        window.addEventListener('DOMContentLoaded', actualizarListas);
    </script>
</body>
</html>